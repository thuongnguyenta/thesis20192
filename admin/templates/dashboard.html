<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" type="image/png" sizes="16x16" href="../static/admin/plugins/images/favicon.png">
    <title>Ample Admin Template - The Ultimate Multipurpose admin template</title>
    <!-- Bootstrap Core CSS -->
    <link href="../static/admin/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Menu CSS -->
    <link href="../static/admin/plugins/bower_components/sidebar-nav/dist/sidebar-nav.min.css" rel="stylesheet">
    <!-- animation CSS -->
    <link href="../static/admin/css/animate.css" rel="stylesheet">
    <!-- Custom CSS -->
    <link href="../static/admin/css/style.css" rel="stylesheet">

    <link href="../static/admin/css/app.css" rel="stylesheet">
    <!-- color CSS -->
    <link href="../static/admin/css/colors/default.css" id="theme" rel="stylesheet">
    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]-->
</head>

<body class="fix-header">
    <!-- ============================================================== -->
    <!-- Preloader -->
    <!-- ============================================================== -->
    <div class="preloader">
        <svg class="circular" viewBox="25 25 50 50">
            <circle class="path" cx="50" cy="50" r="20" fill="none" stroke-width="2" stroke-miterlimit="10" />
        </svg>
    </div>
    <!-- ============================================================== -->
    <!-- Wrapper -->
    <!-- ============================================================== -->
    <div id="wrapper">
        <!-- ============================================================== -->
        <!-- Topbar header - style you can find in pages.scss -->
        <!-- ============================================================== -->
        <nav class="navbar navbar-default navbar-static-top m-b-0">
            <div class="navbar-header">
                <div class="top-left-part">
                    <!-- Logo -->
                    <a class="logo" href="dashboard.html">
                        <!-- Logo icon image, you can use font-icon also --><b>
                            <!--This is dark logo icon--><img src="../static/admin/plugins/images/admin-logo.png" alt="home"
                                class="dark-logo" />
                            <!--This is light logo icon--><img src="../static/admin/plugins/images/admin-logo-dark.png" alt="home"
                                class="light-logo" />
                        </b>
                        <!-- Logo text image you can use text also --><span class="hidden-xs">
                            <!--This is dark logo text--><img src="../static/admin/plugins/images/admin-text.png" alt="home"
                                class="dark-logo" />
                            <!--This is light logo text--><img src="../static/admin/plugins/images/admin-text-dark.png" alt="home"
                                class="light-logo" />
                        </span> </a>
                </div>
                <!-- /Logo -->
                <ul class="nav navbar-top-links navbar-right pull-right">
                    <li>
                        <a class="nav-toggler open-close waves-effect waves-light hidden-md hidden-lg"
                            href="javascript:void(0)"><i class="fa fa-bars"></i></a>
                    </li>
                    <li>
                        <form role="search" class="app-search hidden-sm hidden-xs m-r-10">
                            <input type="text" placeholder="Search..." class="form-control"> <a href=""><i
                                    class="fa fa-search"></i></a> </form>
                    </li>
                    <li>
                        <a class="profile-pic" href="#"> <img src="../static/admin/plugins/images/users/varun.jpg" alt="user-img"
                                width="36" class="img-circle"><b class="hidden-xs">{{session['name']}}</b></a>
                    </li>
                </ul>
            </div>
            <!-- /.navbar-header -->
            <!-- /.navbar-top-links -->
            <!-- /.navbar-static-side -->
        </nav>
        <!-- End Top Navigation -->
        <!-- ============================================================== -->
        <!-- Left Sidebar - style you can find in sidebar.scss  -->
        <!-- ============================================================== -->
        <div class="navbar-default sidebar" role="navigation">
            <div class="sidebar-nav slimscrollsidebar">
                <div class="sidebar-head">
                    <h3><span class="fa-fw open-close"><i class="ti-close ti-menu"></i></span> <span class="hide-menu">Navigation</span></h3>
                </div>
                <ul class="nav" id="side-menu">
                    <li style="padding: 70px 0 0;">
                        <a href="/dashboard" class="waves-effect"><i class="fa fa-clock-o fa-fw" aria-hidden="true"></i>Dashboard</a>
                    </li>
                    <li>
                        <a href="/profile" class="waves-effect"><i class="fa fa-user fa-fw" aria-hidden="true"></i>Profile</a>
                    </li>
                    <li>
                        <a href="/product" class="waves-effect"><i class="fa fa-table fa-fw" aria-hidden="true"></i>Product</a>
                    </li>
                    <li>
                        <a href="/customer" class="waves-effect"><i class="fa fa-group fa-fw" aria-hidden="true"></i>Customer</a>
                    </li>
                    <li>
                        <a href="map-google.html" class="waves-effect"><i class="fa fa-globe fa-fw" aria-hidden="true"></i>Google Map</a>
                    </li>
                    <li>
                        <a href="/order" class="waves-effect"><i class="fa fa-columns fa-fw" aria-hidden="true"></i>Order</a>
                    </li>
                    <li>
                        <a href="404.html" class="waves-effect"><i class="fa fa-info-circle fa-fw" aria-hidden="true"></i>Error 404</a>
                    </li>

                </ul>
                <div class="center p-20">
                     <a href="/logout" class="btn btn-danger btn-block waves-effect waves-light">Logout</a>
                 </div>
            </div>
            
        </div>
        <!-- ============================================================== -->
        <!-- End Left Sidebar -->
        <!-- ============================================================== -->
        <!-- ============================================================== -->
        <!-- Page Content -->
        <!-- ============================================================== -->
        <div id="page-wrapper">
            <div class="container-fluid">
                <div class="row bg-title">
                    <div class="col-lg-3 col-md-4 col-sm-4 col-xs-12">
                        <h4 class="page-title">Dashboard</h4> </div>
                    <div class="col-lg-9 col-sm-8 col-md-8 col-xs-12">
                        <a href="https://wrappixel.com/templates/ampleadmin/" target="_blank" class="btn btn-danger pull-right m-l-20 hidden-xs hidden-sm waves-effect waves-light">Upgrade to Pro</a>
                        <ol class="breadcrumb">
                            <li><a href="#">Dashboard</a></li>
                        </ol>
                    </div>
                    <!-- /.col-lg-12 -->
                </div>
                <!-- /.row -->
                <!-- ============================================================== -->
                <!-- Different data widgets -->
                <!-- ============================================================== -->
                <!-- .row -->
                <div class="row">
                    <div class="col-lg-4 col-sm-6 col-xs-12">
                        <div class="white-box analytics-info">
                            <h3 class="box-title">Product Quantity</h3>
                            <ul class="list-inline two-part">
                                <li>
                                    <div id="sparklinedash"></div>
                                </li>
                                <li class="text-right"><i class="ti-arrow-up text-success"></i> <span class="counter text-success">{{number_product}}</span></li>
                            </ul>
                        </div>
                    </div>
                    <div class="col-lg-4 col-sm-6 col-xs-12">
                        <div class="white-box analytics-info">
                            <h3 class="box-title">Income of Month {{today.strftime("%Y,%B")}}</h3>
                            <ul class="list-inline two-part">
                                <li>
                                    <div id="sparklinedash2"></div>
                                </li>
                                <li class="text-right"><i class="ti-arrow-up text-purple"></i> <span class="counter text-purple">{{income}}</span><ins>đ</ins></li>
                            </ul>
                        </div>
                    </div>
                    <div class="col-lg-4 col-sm-6 col-xs-12">
                        <div class="white-box analytics-info">
                            <h3 class="box-title">Income in Payment Process</h3>
                            <ul class="list-inline two-part">
                                <li>
                                    <div id="sparklinedash3"></div>
                                </li>
                                <li class="text-right"><i class="ti-arrow-up text-info"></i> <span class="counter text-info">{{user_income}}</span><ins>đ</ins></li>
                            </ul>
                        </div>
                    </div>
                </div>
                <!--/.row -->
                <!--row -->
                <!-- /.row -->
                <div class="row">
                    <div class="col-md-12 col-lg-12 col-sm-12 col-xs-12">
                        <div class="white-box">
                            <h3 class="box-title">Products Yearly Sales</h3>
                            <div class="col-md-3 col-sm-4 col-xs-6 pull-right ">
                                
                                <select class="form-control pull-right row b-none" id="combochart_year">
                                    <option>2017</option>
                                    <option>2018</option>
                                    <option>2019</option>
                                    <option selected>2020</option>
                                    
                                </select>
                            </div>
                            <ul class="list-inline text-right">
                                <li>
                                    <h5><i class="fa fa-circle m-r-5 text-info"></i>Mac</h5> </li>
                                <li>
                                    <h5><i class="fa fa-circle m-r-5 text-inverse"></i>Windows</h5> </li>
                            </ul>
                            
                            <!-- <div id="{{combo_chart}}" onclick="alert(combo_chart)">{{combo_chart}}</div> -->
                            <div id="chart" style="width:700px; height:400px; margin:auto;"></div> 
                            <!-- <div id="ct-visits" style="height: 405px;"></div> -->
                            
                            
                             <!-- <canvas id="canvas" height="450" width="600"></canvas> -->
                             
                        </div>
                    </div>
                </div>
                <!-- ============================================================== -->
                <!-- table -->
                <!-- ============================================================== -->
                <div class="row">
                    <div class="col-md-12 col-lg-12 col-sm-12">
                        <div class="white-box">
                            <div class="col-md-3 col-sm-4 col-xs-6 pull-right dp_flex">
                                <select class="form-control pull-right row b-none" style="margin-right:20px;" name="month" id="month">
                                    <option value="1">January</option>
                                    <option value="2">February</option>
                                    <option value="3" >March</option>
                                    <option value="4" selected>April</option>
                                    <option value="5">May</option>
                                    <option value="6">June</option>
                                    <option value="7">July</option>
                                    <option value="8">August</option>
                                    <option value="9">September</option>
                                    <option value="10">October</option>
                                    <option value="11">November</option>
                                    <option value="12">December</option>>
                                </select>
                                <select class="form-control pull-right row b-none" name="year" id="year">
                                    <option>2017</option>
                                    <option>2018</option>
                                    <option>2019</option>
                                    <option selected>2020</option>
                                    
                                </select>
                            </div>
                            <div id="piechart" style="padding: 50px 0 0 0;width: fit-content;margin: auto;"></div>
                            <h3 class="box-title">Recent Sell:</h3>
                            <div class="table-responsive">
                                
                                <table class="table">
                                    <thead>
                                        <tr>
                                            <th>#</th>
                                            <th>Product</th>
                                            <th>Status</th>
                                            <th>Quantity Purchase</th>
                                            <th>Price</th>
                                        </tr>
                                    </thead>
                                    <tbody id="body_product">
                                        {% for idx, pr in sp %}
                                        <tr>
                                            <td>{{idx+1}}</td>
                                            <td class="txt-oflo">{{pr['shoes_name']}}</td>
                                            <td>{% if pr['sale'] %}Sale: {{pr['sale']}}% {% else %} Avaiable {% endif %}</td>
                                            <td class="txt-oflo">{{pr['number_pur']}}</td>
                                            <td><span class="text-success">{{pr['price']}}<ins>đ</ins></span></td>
                                        </tr>
                                        {% endfor %}
                                        
                                    </tbody>
                                </table>
                            </div>

                            <h3 class="box-title">Product Hasn't Purchar:</h3>
                            <div class="table-responsive">
                                
                                <table class="table">
                                    <thead>
                                        <tr>
                                            <th>#</th>
                                            <th>Product</th>
                                            <th>Status</th>
                                            <th>Shoes Type</th>
                                            <th>Feature </th>
                                            <th>Price</th>
                                        </tr>
                                    </thead>
                                    <tbody id="body_product_not">
                                        {% for temp in shoes_remain %}
                                        <tr>
                                            <td>{{temp['id_shoes']}}</td>
                                            <td class="txt-oflo">{{temp['shoes_name']}}</td>
                                            <td>{% if temp['sale'] %}Sale: {{temp['sale']}}% {% else %} Avaiable {% endif %}</td>
                                            <td class="txt-oflo">{{temp['shoes_type']}}</td>
                                            <td>{{temp['feature']}}</td>
                                            <td><span class="text-success">{{temp['price']}}<ins>đ</ins></span></td>
                                        </tr>
                                        {% endfor %}
                                        
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- ============================================================== -->
                <!-- chat-listing & recent comments -->
                <!-- ============================================================== -->
                <div class="row">
                    <!-- .col -->
                    <div class="col-md-12 col-lg-8 col-sm-12">
                        <div class="white-box">
                            <h3 class="box-title">Recent Comments</h3>
                            <div class="comment-center p-t-10" id="ct_comment_all">
                                {% for cm in comment %}
                                <div class="comment-body" id="comment-body-{{cm['id_comment']}}">
                                    <div class="user-img"> <img src="..{{cm['cover_image']}}"  alt="user" class="img-circle" style="border: 1px solid;width:50px; height:50px;">
                                    </div>
                                    <div class="mail-contnet">
                                        <h5>{{cm['username']}}</h5><span class="time">{{cm['time_review'].strftime("%H:%M %d,%B %Y")}}</span>
                                        <br/><span class="mail-desc" >{{cm['comments']}}</span> <div id="comment_{{cm['id_comment']}}" class="btn btn btn-rounded btn-default btn-outline m-r-5 approve_div"><i class="ti-check text-success m-r-5"></i>Approve</div><div href="javacript:void(0)" id="reject_{{cm['id_comment']}}" class="btn-rounded btn btn-default btn-outline reject_div"><i class="ti-close text-danger m-r-5"></i> Reject</div>
                                    </div>
                                    <div class="name_product">
                                        {{cm['shoes_name']}}
                                    </div>
                                    <div class="star" id="{{cm['star']}}">
                                        {% for i in range(0,cm['star'])%}
                                        <span class="fa fa-star checked_star"></span>
                                        {% endfor %}
                                        {% for i in range(cm['star'],5)%}
                                        <span class="fa fa-star uncheck_star"></span>
                                        {% endfor %}
                                        
                                        
                                </div>
                                </div>
                                {% endfor %}
                                <!-- <div class='comment-body' id='comment-body-3'>
                                    <div class='user-img'> <img src='../static/image/people/download.jfif' alt='user' class='img-circle' style='border: 1px solid;width:50px; height:50px;'>
                                    </div>
                                    <div class='mail-contnet'><h5>Mạnh</h5><span class='time'>21:06 17,March 2020</span><br/><span class='mail-desc' >Cũng bình thường</span> 
                                        <div id='comment_3' class='btn btn btn-rounded btn-default btn-outline m-r-5 approve'><i class='ti-check text-success m-r-5'></i>Approve</div>
                                        <div href='javacript:void(0)' class='btn-rounded btn btn-default btn-outline reject'><i class='ti-close text-danger m-r-5'></i> Reject</div>
                                    </div>
                                    <div class='name_product'>Nike React Infinity Run Flyknit</div>
                                    <div class='star' id='star_3'><span class='fa fa-star checked_star'></span><span class='fa fa-star checked_star'></span><span class='fa fa-star checked_star'></span><span class='fa fa-star uncheck_star'></span><span class='fa fa-star uncheck_star'></span>
                                    </div>
                                </div> -->
                                
                                
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-4 col-md-6 col-sm-12">
                        <div class="panel">
                            <div class="sk-chat-widgets">
                                <div class="panel panel-default">
                                    <div class="panel-heading">
                                        CHAT LISTING
                                    </div>
                                    <div class="panel-body">
                                        <ul class="chatonline">
                                            {% for ac in account %}
                                            <li>
                                                <div class="call-chat">
                                                    <button class="btn btn-success btn-circle btn-lg" type="button" ><i class="fa fa-phone"></i></button>
                                                    
                                                    <button class="btn btn-info btn-circle btn-lg" type="button"><i class="fa fa-comments-o"></i></button>
                                                    
                                                </div>
                                                <a href="javascript:void(0)"><img src="..{{ac['cover_image']}}" alt="user-img" width="50px" height="50px" class="img-circle" style="width: 50px;height: 50px;"> <span>{{ac['username']}} <small class="text-success">online</small></span></a>
                                            </li>
                                            {% endfor %}
                                            
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- /.col -->
                </div>
            </div>
            <!-- /.container-fluid -->
            <footer class="footer text-center"> 2017 &copy; Ample Admin brought to you by wrappixel.com </footer>
        </div>
        <!-- ============================================================== -->
        <!-- End Page Content -->
        <!-- ============================================================== -->
    </div>
    <!-- ============================================================== -->
    <!-- End Wrapper -->
    <!-- ============================================================== -->
    <!-- ============================================================== -->
    <!-- All Jquery -->
    <!-- ============================================================== -->
    <script src="../static/admin/plugins/bower_components/jquery/dist/jquery.min.js"></script>
    <!-- Bootstrap Core JavaScript -->
    <script src="../static/admin/bootstrap/dist/js/bootstrap.min.js"></script>
    <!-- Menu Plugin JavaScript -->
    <script src="../static/admin/plugins/bower_components/sidebar-nav/dist/sidebar-nav.min.js"></script>
    <!--slimscroll JavaScript -->
    <script src="../static/admin/js/jquery.slimscroll.js"></script>
    <!--Wave Effects -->
    <script src="../static/admin/js/waves.js"></script>
    <!--Counter js -->
    <script src="../static/admin/plugins/bower_components/waypoints/lib/jquery.waypoints.js"></script>
    <script src="../static/admin/plugins/bower_components/counterup/jquery.counterup.min.js"></script>
    <!-- chartist chart -->
    <script src="../static/admin/plugins/bower_components/chartist-js/dist/chartist.min.js"></script>
    <script src="../static/admin/plugins/bower_components/chartist-plugin-tooltip-master/dist/chartist-plugin-tooltip.min.js"></script>
    <!-- Sparkline chart JavaScript -->
    <script src="../static/admin/plugins/bower_components/jquery-sparkline/jquery.sparkline.min.js"></script>
    <!-- Custom Theme JavaScript -->
    <script src="../static/admin/js/custom.min.js"></script>
    <script src="../static/admin/js/dashboard1.js"></script>
    <script src="../static/admin/plugins/bower_components/toast-master/js/jquery.toast.js"></script>

    <script src="../static/admin/js/Chart.min.js"></script>
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    
    <script>
    
        $(function() {
      $("#month").on("change", function(event){
        $.ajax({
          data: {
            month : $("#month").val(),
            year :$("#year").val()
          },
          type:"POST",
          url : "/dashboard/product_purchase"
        })
        .done(function(data){
       
        $("#body_product").html(data);

        });
/// NOT PURCHAR
        $.ajax({
          data: {
            month : $("#month").val(),
            year :$("#year").val()
          },
          type:"POST",
          url : "/dashboard/product_not_purchase"
        })
        .done(function(data){
       
        $("#body_product_not").html(data);
        });

///Draw chart 
        google.charts.load('current', {'packages':['corechart']});
        google.charts.setOnLoadCallback(drawMonthChart);
      });

      
      
    });

    
    </script>
    <script type="text/javascript">
        // Load google charts
        google.charts.load('current', {'packages':['corechart']});
        google.charts.setOnLoadCallback(drawChart);
        
        // Visualization API with the 'corechart' package.
    // google.charts.load('visualization', { packages: ['corechart'] });
    // google.charts.setOnLoadCallback(drawLineChart);

    function drawChart() {
        $.ajax({
            url: "/getdata_shoes",
            dataType: "json",
            type: "POST",
            contentType: "application/json; charset=utf-8",
            success: function (data) {
                var arrSales = [['Product Name', 'Quantity Purchase']];    // Define an array and assign columns for the chart.

                // Loop through each data and populate the array.
                $.each(data, function (index, value) {
                    arrSales.push([value.shoes_name, value.number]);
                    // alert(arrSales);
                });
                var options = {'title':'Product Has Purchar', 'width':600, 'height':400};
                var figures = google.visualization.arrayToDataTable(arrSales);
        
          // Display the chart inside the <div> element with id="piechart"  
            var chart = new google.visualization.PieChart(document.getElementById('piechart'));
          chart.draw(figures, options);
        console.log();
        
        },
            error: function (XMLHttpRequest, textStatus, errorThrown) {
                alert('Got an Error');
            }
    });
}
function drawMonthChart() {
            
            var month=$("#month").val();
            // alert(month);
          $.ajax({
            url: "/updatedata_shoes",
            dataType: "json",
            type: "POST",
            // contentType: "application/json; charset=utf-8",
            data :{
                'month': month,
                'year' :$("#year").val()
            }
            })
            .done( function (data) {
                var temp=data
                var arrShoes = [['Product Name', 'Quantity Purchase']];    // Define an array and assign columns for the chart.
               
                $.each(data, function (index, value) {
                    // alert
                    arrShoes.push([value.shoes_name, value.number]);
                });
                
                var options = {'title':'Product Has Purchar', 'width':600, 'height':400};
                var figures = google.visualization.arrayToDataTable(arrShoes);
        
          // Display the chart inside the <div> element with id="piechart"  
            var chart = new google.visualization.PieChart(document.getElementById('piechart'));
          chart.draw(figures, options);
        
        
        });
        
    }

       
        </script>

  <script>
    // Visualization API with the 'corechart' package.
    google.charts.load('visualization', { packages: ['corechart'] });
    google.charts.setOnLoadCallback(drawLineChart);

    function drawLineChart() {
        $.ajax({
            url: "/getdata",
            dataType: "json",
            type: "POST",
            contentType: "application/json; charset=utf-8",
            success: function (data) {
                var arrSales = [['Month','Total Value','Not Payment', 'Order_Quantity']];    // Define an array and assign columns for the chart.
            
                $.each(data, function (index, value) {
                    arrSales.push([value.month,value.total, value.income, value.quantity]);
                });

                // Set chart Options.
                // var options = {
                //     title: 'Monthly Income',
                //     curveType: 'function',
                //     legend: { position: 'bottom', textStyle: { color: '#555', fontSize: 14} }  // You can position the legend on 'top' or at the 'bottom'.
                // };
                var options = {
                    title : 'The total value of products sold',
                    vAxis: {title: 'Total Income(đ)'},
                    hAxis: {title: 'Month'},
                    seriesType: 'bars',
                    series: {2: {type: 'line'}} ,
                    legend: { position: 'bottom', textStyle: { color: '#555', fontSize: 14} }
                   };

                // Create DataTable and add the array to it.
                var figures = google.visualization.arrayToDataTable(arrSales);

                var chart = new google.visualization.ComboChart(document.getElementById('chart'));
                chart.draw(figures, options);
            },
            error: function (XMLHttpRequest, textStatus, errorThrown) {
                alert('Got an Error');
            }
        });
    }
</script>


<script>
    $(document).on("click",".reject_div",function(e){
        var _this = this;
            var temp=_this.id;
            var id_comment= temp.substr(7,temp.length);
            // alert(id_comment);
            $.ajax({
              data: {'id_comment':id_comment},
              type:"POST",
              url : "/dashboard/comment"
            })
            .done(function(data){
                // alert("Done");
                // alert("#comment_body_"+id_comment);
                
            $("#ct_comment_all").html(data);
            });
 //your code
});
</script>

<script>
    $(document).on("click",".approve_div",function(e){
        var _this = this;
            var temp=_this.id;
            var id_comment= temp.substr(8,temp.length);
            // alert(id_comment);
            $.ajax({
              data: {'id_comment':id_comment},
              type:"POST",
              url : "/dashboard/comment"
            })
            .done(function(data){
                // alert("Done");
                // alert("#comment_body_"+id_comment);
                
            $("#ct_comment_all").html(data);
            });
 //your code
});
</script>


    
</body>

</html>
